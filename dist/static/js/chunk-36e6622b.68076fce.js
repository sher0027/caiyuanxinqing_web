(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36e6622b"],{5723:function(t,e,i){"use strict";i.d(e,"i",(function(){return a})),i.d(e,"o",(function(){return o})),i.d(e,"m",(function(){return l})),i.d(e,"k",(function(){return s})),i.d(e,"j",(function(){return r})),i.d(e,"a",(function(){return c})),i.d(e,"c",(function(){return d})),i.d(e,"g",(function(){return u})),i.d(e,"d",(function(){return p})),i.d(e,"e",(function(){return m})),i.d(e,"n",(function(){return h})),i.d(e,"l",(function(){return g})),i.d(e,"b",(function(){return f})),i.d(e,"h",(function(){return b})),i.d(e,"f",(function(){return v}));var n=i("b775");function a(t){return Object(n["a"])({url:"/admin/users?pageSize=15",method:"get",params:{pageIndex:t}})}function o(t,e){return Object(n["a"])({url:"/admin/usersOfName?pageSize=10",method:"get",params:{pageIndex:t,name:e}})}function l(t,e){return Object(n["a"])({url:"/admin/reservationsOfUser?pageSize=100",method:"get",params:{pageIndex:t,bid:e}})}function s(t){return Object(n["a"])({url:"/admin/reservationDetail",method:"get",params:{rid:t}})}function r(t){return Object(n["a"])({url:"/admin/assignableAdmins?pageSize=65535",method:"get",params:{pageIndex:t}})}function c(t,e){return Object(n["a"])({url:"/admin/assignReservation",method:"put",params:{rid:t,assignedAid:e}})}function d(t){return Object(n["a"])({url:"/admin/claimReservation",method:"put",params:{rid:t}})}function u(t){return Object(n["a"])({url:"/admin/declineAssignment",method:"put",params:{rid:t}})}function p(t,e,i){return Object(n["a"])({url:"/admin/confirmReservationSolvedDatetime",method:"put",params:{rid:t,solvedDatetime:e,solvedPlace:i}})}function m(t){return Object(n["a"])({url:"/admin/finishReservation",method:"put",params:{rid:t}})}function h(t,e){return Object(n["a"])({url:"/admin/messagesOfUser?pageSize=100",method:"get",params:{pageIndex:t,bid:e}})}function g(t){return Object(n["a"])({url:"/admin/messageDetail",method:"get",params:{mid:t}})}function f(t,e){return Object(n["a"])({url:"/admin/assignMessage",method:"put",params:{mid:t,assignedAid:e}})}function b(t){return Object(n["a"])({url:"/admin/declineMessage",method:"put",params:{mid:t}})}function v(t){return Object(n["a"])({url:"/admin/replyMessage",method:"put",params:{mid:t}})}},efaa:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{staticStyle:{padding:"30px 10px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.serviceList,"default-sort":{prop:"date",order:"descending"}}},[i("el-table-column",{attrs:{prop:"mid",label:"ID",width:"180"}}),i("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),i("el-table-column",{attrs:{prop:"leaverName",label:"姓名",width:"120"}}),i("el-table-column",{attrs:{prop:"leaverPhone",label:"手机号",width:"120"}}),i("el-table-column",{attrs:{prop:"leaverEmail",label:"邮箱地址",width:"180"}}),i("el-table-column",{attrs:{prop:"leftDatetimeString",label:"留言时间",width:"120",sortable:""}}),i("el-table-column",{attrs:{prop:"content",label:"内容",width:"300"}}),i("el-table-column",{attrs:{prop:"statusString",label:"状态",width:"90"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:10}},[i("el-button",{attrs:{size:"small",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleGetServiceDetail(e.row)}}},[t._v("查看详情")])],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:"未回复"==e.row.statusString,expression:"scope.row.statusString=='未回复'"}],attrs:{span:7}},[i("el-button",{attrs:{size:"small",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleAppoint_(e.row)}}},[t._v("指派")])],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:"已指派"==e.row.statusString,expression:"scope.row.statusString=='已指派'"}],attrs:{span:7}},[i("el-button",{attrs:{size:"small",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleWithdraw_(e.row)}}},[t._v("撤回")])],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:"已指派"==e.row.statusString||"未回复"==e.row.statusString,expression:"scope.row.statusString=='已指派'||scope.row.statusString=='未回复'"}],attrs:{span:7}},[i("el-button",{attrs:{size:"small",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleConfirmReply(e.row)}}},[t._v("确认已回复")])],1)],1)]}}])})],1)],1),i("el-dialog",{attrs:{title:"详情",visible:t.dialogServiceDetailVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogServiceDetailVisible=e}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.serviceDetail}},[i("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),i("el-table-column",{attrs:{prop:"content",label:"内容",width:"360"}})],1)],1),i("el-dialog",{attrs:{title:"指派",visible:t.dialogAppoint_Visible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogAppoint_Visible=e}}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:"",placeholder:"请选择老师"},on:{change:function(e){return t.showTeacher_Message(e)}},model:{value:t.adminsList.name,callback:function(e){t.$set(t.adminsList,"name",e)},expression:"adminsList.name"}},t._l(t.adminsList,(function(t){return i("el-option",{key:t.aid,attrs:{label:t.name,value:t.aid}})})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleAppoint_Submit}},[t._v("确 定")]),i("el-button",{on:{click:function(e){t.dialogAppoint_Visible=!1}}},[t._v("取 消")])],1)],1),i("el-dialog",{attrs:{title:"撤回",visible:t.dialogWithdraw_Visible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogWithdraw_Visible=e}}},[i("span",[t._v("撤回指派该生？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleWithdraw_Submit}},[t._v("确 定")]),i("el-button",{on:{click:function(e){t.dialogWithdraw_Visible=!1}}},[t._v("取 消")])],1)]),i("el-dialog",{attrs:{title:"确认已回复",visible:t.dialogConfirmReplyVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogConfirmReplyVisible=e}}},[i("span",[t._v("已回复该留言？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleReply}},[t._v("确 定")]),i("el-button",{on:{click:function(e){t.dialogConfirmReplyVisible=!1}}},[t._v("取 消")])],1)]),i("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"center"}},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.totalCount,"page-size":15,"pager-count":11},on:{"current-change":t.handlePageChange}})],1)],1)},a=[],o=i("b775");function l(t){return Object(o["a"])({url:"/admin/messages?pageSize=100",method:"get",params:{pageIndex:t}})}var s=i("5723"),r={data:function(){return{serviceList:[],serviceDetail:[],adminsList:[],mid:"",assignedAid:"",dialogServiceDetailVisible:!1,dialogAppoint_Visible:!1,dialogWithdraw_Visible:!1,dialogConfirmReplyVisible:!1,totalCount:0,pageIndex:1}},methods:{fetchServiceList:function(t){var e=this;l(t).then((function(t){console.log(t),e.serviceList=t.data.pageList,e.totalCount=t.data.totalRecord})).catch((function(t){console.log(t)}))},fetchAdminsList:function(t){var e=this;Object(s["j"])(t).then((function(t){e.adminsList=t.data.pageList})).catch((function(t){console.log(t)}))},handleGetServiceDetail:function(t){var e=this,i=t.mid;console.log(i),Object(s["l"])(i).then((function(t){console.log(t),e.serviceDetail[0]=t.data,e.dialogServiceDetailVisible=!0})).catch((function(t){console.log(t)}))},handleAppoint_:function(t){this.dialogAppoint_Visible=!0,this.mid=t.mid},showTeacher_Message:function(t){this.assignedAid=t},handleAppoint_Submit:function(){var t=this,e=this.mid,i=this.assignedAid;console.log(e,i),Object(s["b"])(e,i).then((function(e){t.$message({type:"success",message:"指派成功！"}),t.dialogAppoint_Visible=!1,t.fetchServiceList(t.pageIndex)})).catch((function(t){console.log(t)}))},handleWithdraw_:function(t){this.dialogWithdraw_Visible=!0,this.mid=t.mid},handleWithdraw_Submit:function(){var t=this,e=this.mid;console.log(e),Object(s["h"])(e).then((function(e){t.$message({type:"success",message:"撤回成功！"}),t.dialogWithdraw_Visible=!1,t.fetchServiceList(t.pageIndex)})).catch((function(t){console.log(t)}))},handleConfirmReply:function(t){this.dialogConfirmReplyVisible=!0,this.mid=t.mid},handleReply:function(){var t=this,e=this.mid;console.log(e),Object(s["f"])(e).then((function(e){console.log(e),t.$message({type:"success",message:"已确认回复该留言！"}),t.dialogConfirmReplyVisible=!1,t.fetchServiceList(t.pageIndex)})).catch((function(t){console.log(t)}))},handlePageChange:function(t){this.pageIndex=t,console.log(this.pageIndex),this.fetchServiceList(this.pageIndex)}},created:function(){this.fetchServiceList(1),this.fetchAdminsList(1)}},c=r,d=i("2877"),u=Object(d["a"])(c,n,a,!1,null,null,null);e["default"]=u.exports}}]);