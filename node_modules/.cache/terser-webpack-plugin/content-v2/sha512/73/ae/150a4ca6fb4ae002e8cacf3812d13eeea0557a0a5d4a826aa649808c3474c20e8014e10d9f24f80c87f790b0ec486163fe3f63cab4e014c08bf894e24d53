{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-1af19fc2\"],{5723:function(t,e,i){\"use strict\";i.d(e,\"i\",(function(){return l})),i.d(e,\"o\",(function(){return n})),i.d(e,\"m\",(function(){return o})),i.d(e,\"k\",(function(){return s})),i.d(e,\"j\",(function(){return r})),i.d(e,\"a\",(function(){return d})),i.d(e,\"c\",(function(){return c})),i.d(e,\"g\",(function(){return p})),i.d(e,\"d\",(function(){return u})),i.d(e,\"e\",(function(){return h})),i.d(e,\"n\",(function(){return g})),i.d(e,\"l\",(function(){return m})),i.d(e,\"b\",(function(){return b})),i.d(e,\"h\",(function(){return f})),i.d(e,\"f\",(function(){return v}));var a=i(\"b775\");function l(t){return Object(a[\"a\"])({url:\"/admin/users?pageSize=15\",method:\"get\",params:{pageIndex:t}})}function n(t,e){return Object(a[\"a\"])({url:\"/admin/usersOfName?pageSize=10\",method:\"get\",params:{pageIndex:t,name:e}})}function o(t,e){return Object(a[\"a\"])({url:\"/admin/reservationsOfUser?pageSize=100\",method:\"get\",params:{pageIndex:t,bid:e}})}function s(t){return Object(a[\"a\"])({url:\"/admin/reservationDetail\",method:\"get\",params:{rid:t}})}function r(t){return Object(a[\"a\"])({url:\"/admin/assignableAdmins?pageSize=65535\",method:\"get\",params:{pageIndex:t}})}function d(t,e){return Object(a[\"a\"])({url:\"/admin/assignReservation\",method:\"put\",params:{rid:t,assignedAid:e}})}function c(t){return Object(a[\"a\"])({url:\"/admin/claimReservation\",method:\"put\",params:{rid:t}})}function p(t){return Object(a[\"a\"])({url:\"/admin/declineAssignment\",method:\"put\",params:{rid:t}})}function u(t,e,i){return Object(a[\"a\"])({url:\"/admin/confirmReservationSolvedDatetime\",method:\"put\",params:{rid:t,solvedDatetime:e,solvedPlace:i}})}function h(t){return Object(a[\"a\"])({url:\"/admin/finishReservation\",method:\"put\",params:{rid:t}})}function g(t,e){return Object(a[\"a\"])({url:\"/admin/messagesOfUser?pageSize=100\",method:\"get\",params:{pageIndex:t,bid:e}})}function m(t){return Object(a[\"a\"])({url:\"/admin/messageDetail\",method:\"get\",params:{mid:t}})}function b(t,e){return Object(a[\"a\"])({url:\"/admin/assignMessage\",method:\"put\",params:{mid:t,assignedAid:e}})}function f(t){return Object(a[\"a\"])({url:\"/admin/declineMessage\",method:\"put\",params:{mid:t}})}function v(t){return Object(a[\"a\"])({url:\"/admin/replyMessage\",method:\"put\",params:{mid:t}})}},\"972a\":function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"el-row\",[i(\"el-col\",{staticStyle:{\"padding-top\":\"30px\"},attrs:{span:4,offset:1}},[i(\"el-card\",{staticStyle:{width:\"240px\",height:\"120px\"},attrs:{\"body-style\":{padding:\"0px\"},shadow:\"always\"}},[i(\"div\",{staticStyle:{padding:\"14px\"}},[i(\"span\",[t._v(\"待处理\")]),i(\"div\",{staticClass:\"card-body\",staticStyle:{\"padding-left\":\"100px\",\"padding-top\":\"10px\",\"font-size\":\"40px\"}},[i(\"span\",[t._v(t._s(t.unsolved))])])])])],1),i(\"el-col\",{staticStyle:{\"padding-top\":\"30px\"},attrs:{span:4,offset:3}},[i(\"el-card\",{staticStyle:{width:\"240px\",height:\"120px\"},attrs:{\"body-style\":{padding:\"0px\"},shadow:\"always\"}},[i(\"div\",{staticStyle:{padding:\"14px\"}},[i(\"span\",[t._v(\"已完成\")]),i(\"div\",{staticClass:\"card-body\",staticStyle:{\"padding-left\":\"100px\",\"padding-top\":\"10px\",\"font-size\":\"40px\"}},[i(\"span\",[t._v(t._s(t.solved))])])])])],1)],1),i(\"el-row\",{staticStyle:{padding:\"30px 10px\"}},[i(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.myAppointList,\"default-sort\":{prop:\"date\",order:\"descending\"}}},[i(\"el-table-column\",{attrs:{prop:\"rid\",label:\"ID\",width:\"180\"}}),i(\"el-table-column\",{attrs:{prop:\"bookerName\",label:\"姓名\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"bookerPhone\",label:\"手机号\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"bookerRoleString\",label:\"身份\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"bookerGrade\",label:\"年级\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"bookerGenderString\",label:\"性别\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"solutionString\",label:\"形式\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"topic\",label:\"咨询主题\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"statusString\",label:\"状态\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"solverName\",label:\"对接老师\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"solvedDatetimeString\",label:\"时间\",width:\"180\",sortable:\"\"}}),i(\"el-table-column\",{attrs:{fixed:\"right\",label:\"操作\",width:\"240\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-row\",{attrs:{gutter:5}},[i(\"el-col\",{attrs:{span:10}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleGetAppointDetail(e.row)}}},[t._v(\"查看详情\")])],1),i(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"待确认\"==e.row.statusString,expression:\"scope.row.statusString=='待确认'\"}],attrs:{span:7}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleWithdraw(e.row)}}},[t._v(\"撤回\")])],1),i(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"待确认\"==e.row.statusString,expression:\"scope.row.statusString=='待确认'\"}],attrs:{span:7}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleAllocateTime(e.row)}}},[t._v(\"分配时间\")])],1),i(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"待开展\"==e.row.statusString,expression:\"scope.row.statusString=='待开展'\"}],attrs:{span:14}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleFinish(e.row)}}},[t._v(\"完成\")])],1)],1)]}}])})],1)],1),i(\"div\",{staticStyle:{\"margin-bottom\":\"10px\",display:\"flex\",\"justify-content\":\"center\"}},[i(\"el-pagination\",{attrs:{background:\"\",layout:\"total, prev, pager, next\",total:t.totalCount1,\"page-size\":5,\"pager-count\":11},on:{\"current-change\":t.handlePageChange1}})],1),i(\"el-row\",{staticStyle:{padding:\"30px 10px\"}},[i(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.myServiceList,\"default-sort\":{prop:\"date\",order:\"descending\"}}},[i(\"el-table-column\",{attrs:{prop:\"mid\",label:\"ID\",width:\"180\"}}),i(\"el-table-column\",{attrs:{prop:\"title\",label:\"标题\",width:\"180\"}}),i(\"el-table-column\",{attrs:{prop:\"leaverName\",label:\"姓名\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"leaverPhone\",label:\"手机号\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"leaverEmail\",label:\"邮箱地址\",width:\"180\"}}),i(\"el-table-column\",{attrs:{prop:\"leftDatetimeString\",label:\"留言时间\",width:\"120\",sortable:\"\"}}),i(\"el-table-column\",{attrs:{prop:\"content\",label:\"内容\",width:\"300\"}}),i(\"el-table-column\",{attrs:{prop:\"statusString\",label:\"状态\",width:\"90\"}}),i(\"el-table-column\",{attrs:{fixed:\"right\",label:\"操作\",width:\"240\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-row\",{attrs:{gutter:5}},[i(\"el-col\",{attrs:{span:10}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleGetServiceDetail(e.row)}}},[t._v(\"查看详情\")])],1),i(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"已指派\"==e.row.statusString,expression:\"scope.row.statusString=='已指派'\"}],attrs:{span:7}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleWithdraw_(e.row)}}},[t._v(\"撤回\")])],1),i(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"已指派\"==e.row.statusString||\"未回复\"==e.row.statusString,expression:\"scope.row.statusString=='已指派'||scope.row.statusString=='未回复'\"}],attrs:{span:7}},[i(\"el-button\",{attrs:{size:\"small\",disabled:!1},nativeOn:{click:function(i){return i.preventDefault(),t.handleConfirmReply(e.row)}}},[t._v(\"确认已回复\")])],1)],1)]}}])})],1)],1),i(\"div\",{staticStyle:{\"margin-bottom\":\"10px\",display:\"flex\",\"justify-content\":\"center\"}},[i(\"el-pagination\",{attrs:{background:\"\",layout:\"total, prev, pager, next\",total:t.totalCount2,\"page-size\":5,\"pager-count\":11},on:{\"current-change\":t.handlePageChange2}})],1),i(\"el-dialog\",{attrs:{title:\"详情\",visible:t.dialogAppointDetailVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogAppointDetailVisible=e}}},[i(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.appointDetail}},[i(\"el-table-column\",{attrs:{prop:\"topic\",label:\"咨询主题\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"situationDesc\",label:\"主题描述\",width:\"360\"}}),i(\"el-table-column\",{attrs:{prop:\"reservedDatetimes\",label:\"有空时段\",width:\"120\"}})],1)],1),i(\"el-dialog\",{attrs:{title:\"撤回\",visible:t.dialogWithdrawVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogWithdrawVisible=e}}},[i(\"span\",[t._v(\"撤回指派/认领该生？\")]),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleWithdrawSubmit}},[t._v(\"确 定\")]),i(\"el-button\",{on:{click:function(e){t.dialogWithdrawVisible=!1}}},[t._v(\"取 消\")])],1)]),i(\"el-dialog\",{attrs:{title:\"分配时间\",visible:t.dialogAllocateTimeVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogAllocateTimeVisible=e}}},[i(\"div\",{staticStyle:{display:\"flex\",\"flex-direction\":\"column\"}},[i(\"span\",{staticStyle:{padding:\"0px 0px 10px\",\"font-size\":\"15px\"}},[t._v(\"时间描述\")]),i(\"span\",{staticStyle:{padding:\"15px 0px\",color:\"#A9A9A9\"}},[t._v(t._s(t.timeDes))]),i(\"span\",{staticStyle:{padding:\"10px 0px 25px\",\"font-size\":\"15px\"}},[t._v(\"分配时间\")]),i(\"el-row\",[i(\"el-col\",{attrs:{span:8}},[i(\"el-date-picker\",{attrs:{type:\"date\",placeholder:\"请选择日期\",\"picker-options\":t.pickerOptions,\"value-format\":\"yyyy-MM-dd\"},on:{change:function(e){return t.showDateMessage(e)}},model:{value:t.date,callback:function(e){t.date=e},expression:\"date\"}})],1),i(\"el-col\",{attrs:{span:16}},[i(\"el-time-picker\",{attrs:{placeholder:\"请选择开始时间\",\"value-format\":\"HH:mm\"},on:{change:function(e){return t.showTimeMessage(e)}},model:{value:t.time,callback:function(e){t.time=e},expression:\"time\"}})],1)],1),i(\"span\",{staticStyle:{padding:\"25px 0px\",\"font-size\":\"15px\"}},[t._v(\"分配地点\")]),i(\"el-row\",[i(\"el-col\",{attrs:{span:7}},[i(\"el-input\",{attrs:{placeholder:\"请输入地点\",clearable:\"\"},model:{value:t.solvedplace,callback:function(e){t.solvedplace=e},expression:\"solvedplace\"}})],1),i(\"el-col\",{attrs:{span:12,offset:18}},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleAllocateTimeSubmit}},[t._v(\"确 定\")]),i(\"el-button\",{on:{click:function(e){t.dialogAllocateTimeVisible=!1}}},[t._v(\"取 消\")])],1)],1)],1)]),i(\"el-dialog\",{attrs:{title:\"完成\",visible:t.dialogFinishVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogFinishVisible=e}}},[i(\"span\",[t._v(\"已完成该预约？\")]),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleFinishSubmit}},[t._v(\"确 定\")]),i(\"el-button\",{on:{click:function(e){t.dialogFinishVisible=!1}}},[t._v(\"取 消\")])],1)]),i(\"el-dialog\",{attrs:{title:\"详情\",visible:t.dialogServiceDetailVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogServiceDetailVisible=e}}},[i(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.serviceDetail}},[i(\"el-table-column\",{attrs:{prop:\"title\",label:\"标题\",width:\"180\"}}),i(\"el-table-column\",{attrs:{prop:\"content\",label:\"内容\",width:\"360\"}})],1)],1),i(\"el-dialog\",{attrs:{title:\"撤回\",visible:t.dialogWithdraw_Visible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogWithdraw_Visible=e}}},[i(\"span\",[t._v(\"撤回指派该生？\")]),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleWithdraw_Submit}},[t._v(\"确 定\")]),i(\"el-button\",{on:{click:function(e){t.dialogWithdraw_Visible=!1}}},[t._v(\"取 消\")])],1)]),i(\"el-dialog\",{attrs:{title:\"确认已回复\",visible:t.dialogConfirmReplyVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogConfirmReplyVisible=e}}},[i(\"span\",[t._v(\"已回复该留言？\")]),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleReply}},[t._v(\"确 定\")]),i(\"el-button\",{on:{click:function(e){t.dialogConfirmReplyVisible=!1}}},[t._v(\"取 消\")])],1)])],1)},l=[],n=i(\"b775\");function o(t,e){return Object(n[\"a\"])({url:\"/admin/myAdmin?reservationPageSize=5&messagePageSize=5\",method:\"get\",params:{reservationPageIndex:t,messagePageIndex:e}})}var s=i(\"5723\"),r={data:function(){return{unsolved:0,solved:0,personalList:[],myAppointList:[],appointDetail:[],pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()}},dialogWithdrawVisible:!1,dialogAllocateTimeVisible:!1,dialogFinishVisible:!1,dialogAppointDetailVisible:!1,rid:\"\",assignedAid:\"\",timeDes:\"\",date:\"\",time:\"\",solvedplace:\"\",myServiceList:[],serviceDetail:[],dialogServiceDetailVisible:!1,dialogWithdraw_Visible:!1,dialogConfirmReplyVisible:!1,mid:\"\",totalCount1:0,pageIndex1:1,totalCount2:0,pageIndex2:1}},methods:{fetchPersonalList:function(t,e){var i=this;console.log(this.$store.getters.roles),o(t,e).then((function(t){console.log(t),i.unsolved=t.data.unsolved,i.solved=t.data.solved,i.myAppointList=t.data.myReservations.pageList,i.totalCount1=t.data.myReservations.totalRecord,i.totalCount1=t.data.myReservations.totalRecord,i.myServiceList=t.data.myMessages.pageList,i.totalCount2=t.data.myMessages.totalRecord})).catch((function(t){console.log(t)}))},fetchAdminsList:function(t){var e=this;Object(s[\"j\"])(t).then((function(t){e.adminsList=t.data.pageList})).catch((function(t){console.log(t)}))},handleGetAppointDetail:function(t){var e=this,i=t.rid;console.log(i),Object(s[\"k\"])(i).then((function(t){console.log(t.data),e.appointDetail[0]=t.data,e.dialogAppointDetailVisible=!0})).catch((function(t){console.log(t)}))},handleWithdraw:function(t){this.dialogWithdrawVisible=!0,this.rid=t.rid},handleWithdrawSubmit:function(){var t=this,e=this.rid;console.log(e),Object(s[\"g\"])(e).then((function(e){t.$message({type:\"success\",message:\"撤回成功！\"}),t.dialogWithdrawVisible=!1,t.fetchPersonalList(t.pageIndex1,t.pageIndex2)})).catch((function(t){console.log(t)}))},handleAllocateTime:function(t){var e=this;this.rid=t.rid;var i=this.rid;this.dialogAllocateTimeVisible=!0,Object(s[\"k\"])(i).then((function(t){console.log(t.data),e.timeDes=t.data.reservedDatetimes})).catch((function(t){console.log(t)}))},showDateMessage:function(t){this.date=t,console.log(this.date)},showTimeMessage:function(t){this.time=t,console.log(this.time)},handleAllocateTimeSubmit:function(){var t=this,e=this.rid;console.log(e);var i=this.date+\" \"+this.time,a=this.solvedplace;console.log(i),Object(s[\"d\"])(e,i,a).then((function(e){t.$message({type:\"success\",message:\"分配时间成功！\"}),t.dialogAllocateTimeVisible=!1,t.fetchPersonalList(t.pageIndex1,t.pageIndex2)})).catch((function(t){console.log(t)}))},handleFinish:function(t){this.rid=t.rid,this.dialogFinishVisible=!0},handleFinishSubmit:function(){var t=this,e=this.rid;console.log(e),Object(s[\"e\"])(e).then((function(e){console.log(e.data),t.$message({type:\"success\",message:\"已确认完成！\"}),t.dialogFinishVisible=!1,t.fetchPersonalList(t.pageIndex1,t.pageIndex2)})).catch((function(t){console.log(t)}))},handleGetServiceDetail:function(t){var e=this,i=t.mid;console.log(i),Object(s[\"l\"])(i).then((function(t){console.log(t),e.serviceDetail[0]=t.data,e.dialogServiceDetailVisible=!0})).catch((function(t){console.log(t)}))},handleWithdraw_:function(t){this.dialogWithdraw_Visible=!0,this.mid=t.mid},handleWithdraw_Submit:function(){var t=this,e=this.mid;console.log(e),Object(s[\"h\"])(e).then((function(e){t.$message({type:\"success\",message:\"撤回成功！\"}),t.dialogWithdraw_Visible=!1,t.fetchPersonalList(t.pageIndex1,t.pageIndex2)})).catch((function(t){console.log(t)}))},handleConfirmReply:function(t){this.dialogConfirmReplyVisible=!0,this.mid=t.mid},handleReply:function(){var t=this,e=this.mid;console.log(e),Object(s[\"f\"])(e).then((function(e){console.log(e),t.$message({type:\"success\",message:\"已确认回复该留言！\"}),t.dialogConfirmReplyVisible=!1,t.fetchPersonalList(t.pageIndex1,t.pageIndex2)})).catch((function(t){console.log(t)}))},handlePageChange1:function(t){this.pageIndex1=t,this.fetchPersonalList(this.pageIndex1,this.pageIndex2)},handlePageChange2:function(t){this.pageIndex2=t,this.fetchPersonalList(this.pageIndex1,this.pageIndex2)}},created:function(){this.fetchPersonalList(1,1)}},d=r,c=i(\"2877\"),p=Object(c[\"a\"])(d,a,l,!1,null,null,null);e[\"default\"]=p.exports}}]);","extractedComments":[]}