{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d2295cb\"],{dcb8:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"el-row\",{staticStyle:{\"margin-top\":\"20px\"}},[n(\"el-col\",{attrs:{span:2,offset:21}},[n(\"el-button\",{on:{click:t.handleAddIdentity}},[t._v(\"新增\")])],1)],1),n(\"el-row\",{staticStyle:{\"margin-top\":\"10px\"}},[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.identityList}},[n(\"el-table-column\",{attrs:{prop:\"aid\",label:\"ID\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"name\",label:\"用户名\",width:\"120\"}}),n(\"el-table-column\",{attrs:{prop:\"phone\",label:\"手机号\",width:\"120\"}}),n(\"el-table-column\",{attrs:{prop:\"password\",label:\"密码\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"powerString\",label:\"权限\",width:\"90\"}}),n(\"el-table-column\",{attrs:{fixed:\"right\",label:\"操作\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"small\"},on:{click:function(n){return t.handleEdit(e.row)}}},[t._v(\"维护\")]),n(\"el-popconfirm\",{attrs:{title:\"确定删除此数据？\"},on:{onConfirm:function(n){return t.handleDelete(e.row)}}},[n(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",size:\"small\"},slot:\"reference\"},[t._v(\"删除\")])],1)]}}])})],1)],1),n(\"el-dialog\",{attrs:{title:\"新增\",visible:t.dialogFormAddVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogFormAddVisible=e}}},[n(\"identity-form\",{attrs:{identity:t.identity,from:\"add\"},on:{\"on-success\":t.handleSubmitIdentity,\"on-cancel\":t.handleCancel}})],1),n(\"el-dialog\",{attrs:{title:\"维护\",visible:t.dialogFormEditVisible,width:\"70%\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogFormEditVisible=e}}},[n(\"identity-form\",{attrs:{identity:t.identity,from:\"edit\"},on:{\"on-success\":t.handleChangeIdentity,\"on-cancel\":t.handleCancel}})],1),n(\"div\",{staticStyle:{margin:\"10px 0px\",display:\"flex\",\"justify-content\":\"center\"}},[n(\"el-pagination\",{attrs:{background:\"\",layout:\"total, prev, pager, next\",total:t.totalCount,\"page-size\":15,\"pager-count\":11},on:{\"current-change\":t.handlePageChange}})],1)],1)},l=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"el-form\",{ref:\"identityForm\",staticClass:\"demo-ruleForm\",staticStyle:{\"margin-top\":\"20px\"},attrs:{model:t.identity,rules:t.rules,\"label-width\":\"100px\"}},[n(\"el-row\",{attrs:{gutter:20}},[n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{attrs:{label:\"姓名\",prop:\"name\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入姓名\"},model:{value:t.identity.name,callback:function(e){t.$set(t.identity,\"name\",e)},expression:\"identity.name\"}})],1)],1),n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{attrs:{label:\"手机号\",prop:\"phone\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入手机号\"},model:{value:t.identity.phone,callback:function(e){t.$set(t.identity,\"phone\",e)},expression:\"identity.phone\"}})],1)],1)],1),n(\"el-row\",{attrs:{gutter:20}},[n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{attrs:{label:\"密码\",prop:\"password\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入密码\"},model:{value:t.identity.password,callback:function(e){t.$set(t.identity,\"password\",e)},expression:\"identity.password\"}})],1)],1),n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{attrs:{label:\"权限\",prop:\"powerString\"}},[n(\"el-select\",{attrs:{placeholder:\"请选择权限\",clearable:\"\"},model:{value:t.identity.powerString,callback:function(e){t.$set(t.identity,\"powerString\",e)},expression:\"identity.powerString\"}},[n(\"el-option\",{attrs:{label:\"普通成员\",value:\"普通成员\"}}),n(\"el-option\",{attrs:{label:\"管理员\",value:\"管理员\"}})],1)],1)],1)],1),n(\"el-form-item\",[\"add\"===t.from?n(\"el-col\",{attrs:{span:24,offset:20}},[n(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(e){return t.onSubmit(\"identityForm\")}}},[t._v(\"确认\")]),n(\"el-button\",{attrs:{size:\"small\"},on:{click:function(e){return t.onCancel(\"identityForm\")}}},[t._v(\"取消\")])],1):t._e(),\"edit\"===t.from?n(\"el-col\",{attrs:{span:24,offset:20}},[n(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(e){return t.onSubmit(\"identityForm\")}}},[t._v(\"修改\")]),n(\"el-button\",{attrs:{size:\"small\"},on:{click:function(e){return t.onCancel(\"identityForm\")}}},[t._v(\"取消\")])],1):t._e()],1)],1)],1)},o=[],r={name:\"IdentityForm\",props:{identity:{type:Object,value:{}},from:{type:String,value:\"add\"}},data:function(){return{rules:{name:[{required:!0,message:\"姓名不能为空\",trigger:\"blur\"}],phone:[{required:!0,message:\"手机号不能为空\",trigger:\"blur\"}],password:[{required:!0,message:\"密码不能为空\",trigger:\"blur\"}],powerString:[{required:!0,message:\"权限不能为空\",trigger:\"blur\"}]}}},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message({type:\"warning\",message:\"请将信息填写完整!\"}),console.log(\"error submit!!\"),!1;var n=JSON.parse(JSON.stringify(e.identity));e.$emit(\"on-success\",n)}))},resetForm:function(t){this.$refs[t].resetFields(),this.$emit(\"on-cancel\")},onCancel:function(t){this.$refs[t].resetFields(),this.$emit(\"on-cancel\")}}},s=r,d=n(\"2877\"),c=Object(d[\"a\"])(s,a,o,!1,null,null,null),u=c.exports,m=n(\"b775\");function p(t){return Object(m[\"a\"])({url:\"/admin/admins?pageSize=15\",method:\"get\",params:{pageIndex:t}})}function f(t){return Object(m[\"a\"])({url:\"/admin/admin\",method:\"post\",data:t})}function g(t){return Object(m[\"a\"])({url:\"/admin/admin\",method:\"put\",data:t})}function h(t){return Object(m[\"a\"])({url:\"/admin/admin\",method:\"delete\",params:{aid:t}})}var b={components:{IdentityForm:u},data:function(){return{identityList:[],identity:{},dialogFormAddVisible:!1,dialogFormEditVisible:!1,totalCount:0,pageIndex:1}},methods:{fetchIdentityList:function(t){var e=this;p(t).then((function(t){e.identityList=t.data.pageList,e.totalCount=t.data.totalRecord})).catch((function(t){console.log(t)}))},handleEdit:function(t){var e=JSON.parse(JSON.stringify(t));this.identity=e,this.dialogFormEditVisible=!0},handleAddIdentity:function(){this.identity={},this.dialogFormAddVisible=!0},handleSubmitIdentity:function(t){var e=this;f(t).then((function(t){console.log(t),e.$message({type:\"success\",message:\"新增身份成功！\"}),e.dialogFormAddVisible=!1,console.log(e.pageIndex),e.fetchIdentityList(e.pageIndex)})).catch((function(t){console.log(t)}))},handleChangeIdentity:function(t){var e=this;g(t).then((function(t){e.$message({type:\"success\",message:\"修改成功\"}),e.dialogFormEditVisible=!1,console.log(e.pageIndex),e.fetchIdentityList(e.pageIndex)})).catch((function(t){console.log(t)}))},handleCancel:function(){this.dialogFormAddVisible=!1,this.dialogFormEditVisible=!1},handleDelete:function(t){var e=this;console.log(t.aid);var n=t.aid;h(n).then((function(t){console.log(t),e.$message({type:\"success\",message:\"已删除！\"}),e.fetchIdentityList(e.pageIndex)})).catch((function(t){console.log(t)}))},handlePageChange:function(t){this.pageIndex=t,console.log(this.pageIndex),this.fetchIdentityList(this.pageIndex)}},created:function(){this.fetchIdentityList(1)}},y=b,v=Object(d[\"a\"])(y,i,l,!1,null,null,null);e[\"default\"]=v.exports}}]);","extractedComments":[]}